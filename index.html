<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Temperature & Humidity Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial; margin: 20px; }
    h2 { text-align: center; }
    canvas { max-width: 1000px; margin: auto; display: block; }
  </style>
</head>
<body>

<h2>ðŸŒ¡ Live Temperature & ðŸ’§ Humidity Dashboard</h2>
<canvas id="myChart"></canvas>

<script>
const sheetURL = "https://opensheet.elk.sh/1Om7C4niF3p1A9dEc_8I7xWJtTlsbK0p-54gS5PKzEHM/Sheet1";
let myChart = null;

async function loadData() {
  try {
    const res = await fetch(sheetURL);
    const data = await res.json();

    const labels = data.map(r => r["Time Stamp"]);
    const temp   = data.map(r => Number(r["Temperature "]));
    const hum    = data.map(r => Number(r["Humidity "]));

    const ctx = document.getElementById("myChart").getContext("2d");

    if (myChart) myChart.destroy();

    myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [
          { label: "Temperature (Â°C)", data: temp, borderColor: 'red', borderWidth: 2 },
          { label: "Humidity (%)", data: hum, borderColor: 'blue', borderWidth: 2 }
        ]
      },
      options: {
        responsive: true,
        animation: false,
        scales: { y: { beginAtZero: false } }
      }
    });

  } catch (err) {
    console.error("Error fetching data:", err);
  }
}

// Initial load
loadData();
// Auto-refresh every 10 seconds
setInterval(loadData, 10000);
</script>

</body>
</html>
